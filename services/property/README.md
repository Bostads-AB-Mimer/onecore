# ONECore - Property XPAND Adapter

POC to investigate Prisma as data-layer between Xpand and ONECore

## Development

### Requirements

We use pnpm as our package manager: https://pnpm.io/installation

This application requires the following to be installed on your system:

- **pnpm**
- **Node.js**
- **Docker**

### Install Instructions

#### Prepare environment

Run the `dev:init` script to create a file called `.env`, or manually make a copy of `.env.template`:

```sh
$ pnpm run dev:init
```

Or:

```sh
$ cp .env.template .env
```

Supply credentials to your database in the following format:

`ðŸ“„ .env`

```ini
DATABASE_URL=sqlserver://localhost:11434;database=[database];user=[user];password=[password];encrypt=true;trustServerCertificate=true
```

#### Install dependencies

Install dependencies

```sh
$ pnpm run install
```

#### Generate the Prisma client

The client will reside in `node_modules` and changes to the schema will require a new generation of the client.

```sh
$ pnpm run prisma:generate
```

#### Optional but recommended

Install a Prisma extension for the editor of your choice to get syntax highlighting and automatic formatting. https://www.prisma.io/docs/orm/more/development-environment/editor-setup

### Running in Development Mode

When all installation steps have been completed and downstreams services are running, a local development instance can be started using:

```sh
$ pnpm run dev
```

### Prisma

The schema files define the database structure and are the blueprints used by the Prisma client.

The client resides in `node_modules` and is generated by running `pnpm run prisma:generate` or `pnpm run generate:static` from the monorepo repository root..

Changes to the schema require a new generation of the client. Run `pnpm run prisma:force-generate` to remove node_modules, install the dependencies and generate a new client.

### Prisma AI Renamer

To convert schemas first install the prisma-ai-renamer tool and then run to convert a model

These prompts for the tool are placed in the prompts folder which means we can easily change the prompts if we want the tool to be better at understanding our purposes.

## License

Â© 2025 Bostads AB Mimer. [AGPL-3.0-only Licensed](./LICENSE)
